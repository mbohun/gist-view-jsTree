<html>
  <head>
    <link rel="stylesheet" href="dist/themes/default/style.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="dist/jstree.min.js"></script>
  </head>

  <body>
    <div id="container">
    </div>

  <script>
  $(function() {
      fetch('https://api.github.com/users/mbohun/gists')
          .then(function(response) {
              return response.json();
          })
          .then(function(myJson) {
              console.log("INPUT:" + JSON.stringify(myJson));

              var input_data = [];
              myJson.forEach(function(gist) {
                  var gist_file_names = Object.keys(gist.files);
                  var gist_files = [];
                  gist_file_names.forEach(function(file_name) {
                      //console.log("TEST:" + gist.files[file_name].raw_url);
                      gist_files.push({
                          'text': gist.files[file_name].filename,
                          'icon' : 'jstree-file'
                      });
                  });

                  input_data.push({
                      'text': gist.description,
                      'id':   gist.id,
                      'state': {
                        'opened':   false,
                        'disabled': false,
                        'selected': false
                      },
                      'children' : gist_files
                  });
              });

              console.log(input_data);

              console.log("BEFORE jstree");

              $('#container').jstree({
                  'core' : {
                      'data': input_data
                  }
              });
          });
    })
  </script>
  </body>
</html>
